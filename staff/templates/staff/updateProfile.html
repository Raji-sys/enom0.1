{%extends "base.html" %}
{% block title %}personal details update form{% endblock%}
{% block main %}
<style>
  .readonly{
    background-color:#f5f5f5;
  color:#999999;
  cursor:not-allowed;
}
</style>
<div class="border-2 border-green-800 w-1/2 mx-auto mt-1 md:p-14 bg-white shadow-2xl overflow-hidden sm:rounded-lg backdrop-blur-sm">
    <section class=" text-center border-b-2 border-green-700">
        <p class="text-green-800 uppercase   text-3xl">personal details update form</p> 
<p class=" text-2xl text-blue-500 uppercase">{% for m in messages%}
        {{m}}
      </p>
        {%endfor%}
        <p>
    </section>
<form action="" method="POST" id="personal-detail-form" class="flex flex-col justify-center  uppercase  text-green-900">
    {% csrf_token %}
    {%load widget_tweaks%}
              <div class="p-4 mr-4">
            {% for field in profileform%}
            <div class="mb-4">
              <div class="flex flex-col">
                <label class="" for="{{field.id_for_label}}">{{field.label}}</label>
              <div>
                {{field|add_class:'focus:outline-none border-b-4 border-gray-300 inBtn text-white  rounded shadow-lg hover:shadow-xl'}}
              </div>
              <div class="text-red-600">
                {{field.errors}}
              </div>
            </div>
          </div>
            {%endfor%} 
            </div>
        <div>
          <button type="submit" class="py-4 focus:opacity-10 uppercase border-b-4 border-gray-500 focus:border-green-600 bg-gradient-to-r from-green-900 via-green-600 to-green-900 text-white   rounded shadow-lg hover:shadow-xl text-center w-1/3">
            submit
          </button>
        </div>
</form>
<script>
  // Get the select elements
  const zoneSelect = document.getElementById('id_zone');
  const stateSelect = document.getElementById('id_state');
  const lgaSelect = document.getElementById('id_lga');

  // Define the available states for each zone
  
  const zoneStatesLGAs = {
    'North-East': {
      'Adamawa': ['LGA1', 'LGA2'],
      'Bauchi': ['LGA3', 'LGA4']
    },
    'North-West': {
      'Kano': ['DALA', 'FAGGE'],
      'Kaduna': ['LGA7', 'LGA8']
    },
    'North-Central': {
      'Niger': ['LGA9', 'LGA10'],
      'Benue': ['LGA11', 'LGA12']
    },
    'South-East': {
      'Enugu': ['LGA13', 'LGA14'],
      'Imo': ['LGA15', 'LGA16']
    },
    'South-West': {
      'Lagos': ['LGA17', 'LGA18'],
      'Ogun': ['LGA19', 'LGA20']
    },
    'South-South': {
      'Rivers': ['LGA21', 'LGA22'],
      'Delta': ['LGA23', 'LGA24']
    }
  };

  

  function updateStates() {
    const selectedZone = zoneSelect.value;
    stateSelect.innerHTML = '<option value="">Select State</option>';
    lgaSelect.innerHTML = '<option value="">Select LGA</option>';

    if (selectedZone) {
      const states = Object.keys(zoneStatesLGAs[selectedZone]);
      for (let i = 0; i < states.length; i++) {
        const option = document.createElement('option');
        option.text = states[i];
        option.value = states[i];
        stateSelect.add(option);
      }
    }
  }

  function updateLGAs() {
    const selectedZone = zoneSelect.value;
    const selectedState = stateSelect.value;
    lgaSelect.innerHTML = '<option value="">Select LGA</option>';

    if (selectedZone && selectedState) {
      const lgas = zoneStatesLGAs[selectedZone][selectedState];
      for (let i = 0; i < lgas.length; i++) {
        const option = document.createElement('option');
        option.text = lgas[i];
        option.value = lgas[i];
        lgaSelect.add(option);
      }
    }
  }

  zoneSelect.addEventListener('change', updateStates);
  stateSelect.addEventListener('change', updateLGAs);
  // Update the form's action URL with the user ID
  const form = document.getElementById('personal-detail-form');
  const userId = "{{ user.id }}";  // Replace with the actual variable holding the user ID
  form.action = form.action.replace('user_id', userId);
</script>
</div>
{% endblock %}

<!-- {% if form.instance.date_of_birth %}
<script>
  document.addEventListener('DOMContentLoaded',function(){
    const dob=document.getElementById('date_of_birth');
    dob.classList.add('readonly')
    dob.disabled=true;
      });
  </script>
{% endif %} -->